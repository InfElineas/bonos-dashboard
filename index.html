<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Bonos</title>

  <!-- Font + Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- Minimal UI styles (sin depender de tu CSS viejo) -->
  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f172a;
      --card:#111c33;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --border:rgba(255,255,255,.08);
      --accent:#3b82f6;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:linear-gradient(180deg, #0b1220, #050a14);
      color:var(--text);
    }

    .wrap{
      max-width:1200px;
      margin:0 auto;
      padding:22px;
    }

    .page-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:16px;
      margin-bottom:16px;
    }

    h1{
      margin:0;
      font-size:1.35rem;
      font-weight:700;
      letter-spacing:.2px;
    }

    .muted{
      color:var(--muted);
      font-size:.9rem;
      margin-top:6px;
    }

    .actions{ display:flex; gap:10px; }

    .btn{
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .btn:hover{ background:rgba(255,255,255,.10); }
    .btn.primary{
      background:rgba(59,130,246,.18);
      border-color:rgba(59,130,246,.35);
    }
    .btn.primary:hover{ background:rgba(59,130,246,.26); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }

    .kpi-grid{
      display:grid;
      grid-template-columns:repeat(6, minmax(0,1fr));
      gap:12px;
      margin-bottom:16px;
    }
    .kpi{
      padding:14px;
      border-radius:14px;
      border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }
    .kpi .k{ color:var(--muted); font-size:.8rem; }
    .kpi .v{ font-size:1.12rem; font-weight:800; margin-top:6px; }

    .grid-2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
      margin-bottom:14px;
    }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
    }

    .card-head{
      padding:12px 14px;
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    .card-head h3{
      margin:0;
      font-size:1rem;
      font-weight:700;
    }

    .table-wrap{ overflow:auto; }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:.92rem;
    }

    th, td{
      padding:10px 12px;
      border-bottom:1px solid var(--border);
      white-space:nowrap;
    }

    th{
      text-align:left;
      font-size:.78rem;
      color:var(--muted);
      background:rgba(255,255,255,.03);
      position:sticky;
      top:0;
    }

    tr:hover td{ background:rgba(255,255,255,.03); }

    @media (max-width: 1200px){
      .kpi-grid{ grid-template-columns:repeat(3, minmax(0,1fr)); }
      .grid-2{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <div class="page-head">
      <div>
        <h1>Dashboard Bonos</h1>
        <div class="muted" id="lastUpdate">Actualización: —</div>
      </div>

      <div class="actions">
        <!-- opcional: solo si en tu script usas setupApiBtn -->
        <button id="setupApiBtn" class="btn" type="button" title="Crea/arma la hoja API si hace falta">
          <i class="fa-solid fa-wrench"></i> Setup API
        </button>

        <button id="refreshDashboard" class="btn primary" type="button">
          <i class="fas fa-sync"></i> Actualizar
        </button>
      </div>
    </div>

    <!-- KPIs -->
    <div class="kpi-grid" id="kpiGrid"></div>

    <!-- Tablas -->
    <div class="grid-2">
      <div class="card">
        <div class="card-head"><h3>Reporte TKC</h3></div>
        <div class="table-wrap"><table id="tkcTable"></table></div>
      </div>

      <div class="card">
        <div class="card-head"><h3>Reporte Flotas</h3></div>
        <div class="table-wrap"><table id="flotasTable"></table></div>
      </div>
    </div>

    <div class="grid-2">
      <div class="card">
        <div class="card-head"><h3>Órdenes sin asignar</h3></div>
        <div class="table-wrap"><table id="sinAsignarTable"></table></div>
      </div>

      <div class="card">
        <div class="card-head"><h3>Órdenes pendientes en flota</h3></div>
        <div class="table-wrap"><table id="pendientesFlotaTable"></table></div>
      </div>
    </div>

    <div class="grid-2">
      <div class="card">
        <div class="card-head"><h3>Plan $</h3></div>
        <div class="table-wrap"><table id="planTable"></table></div>
      </div>

      <div class="card">
        <div class="card-head"><h3>$ a preparar por distribuidor</h3></div>
        <div class="table-wrap"><table id="prepararTable"></table></div>
      </div>
    </div>
  </main>

  <script src="script.js"></script>
</body>
</html>
